<local:SettingsViewBase
    x:Class="AppTemplate.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppTemplate.Views"
    xmlns:markup="using:AppTemplate.Markup"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid RowSpacing="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="1">
            <StackPanel
                x:Name="ContentRoot"
                Padding="24"
                Orientation="Vertical"
                Spacing="8">

                <!-- Page header -->
                <TextBlock
                    Margin="0,0,0,16"
                    Style="{ThemeResource TitleLargeTextBlockStyle}"
                    Text="{x:Bind ViewModel.PageTitle, Mode=OneWay}" />

                <!-- General section -->
                <TextBlock
                    Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                    Text="{markup:Localize Key=General}" />

                <toolkit:SettingsCard Header="{markup:Localize Key=Theme}">
                    <toolkit:SettingsCard.HeaderIcon>
                        <FontIcon Glyph="&#xE793;" />
                    </toolkit:SettingsCard.HeaderIcon>
                    <ComboBox
                        ItemsSource="{x:Bind ViewModel.ThemeOptions}"
                        SelectedItem="{x:Bind ViewModel.Theme, Mode=TwoWay}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate x:DataType="ElementTheme">
                                <TextBlock Text="{x:Bind Converter={StaticResource EnumLocalizationConverter}}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </toolkit:SettingsCard>

                <!-- About section -->
                <TextBlock
                    Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                    Text="{markup:Localize Key=About}" />

                <toolkit:SettingsCard
                    Description="{markup:Localize Key=AboutAppDescription}"
                    Header="{markup:Localize Key=ApplicationName}">
                    <toolkit:SettingsCard.HeaderIcon>
                        <BitmapIcon
                            ShowAsMonochrome="False"
                            UriSource="ms-appx:///Assets/Icons/icon_foreground.png" />
                    </toolkit:SettingsCard.HeaderIcon>
                    <TextBlock Text="{x:Bind ViewModel.AppVersion}" />
                </toolkit:SettingsCard>

                <!-- Debug section -->
                <StackPanel Visibility="{x:Bind ViewModel.IsDebug}">
                    <TextBlock
                        Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                        Text="{markup:Localize Key=Debugging}" />

                    <toolkit:SettingsCard Header="{markup:Localize Key=ClearPreferences}">
                        <Button
                            Command="{x:Bind ViewModel.ClearPreferencesCommand}"
                            Content="{markup:Localize Key=Clear}" />
                    </toolkit:SettingsCard>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- Responsive padding -->
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="ContentRoot.Padding" Value="12" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="768" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="ContentRoot.Padding" Value="24" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</local:SettingsViewBase>
