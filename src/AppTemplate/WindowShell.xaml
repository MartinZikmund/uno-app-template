<Page
    x:Class="AppTemplate.WindowShell"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:toolkit="using:Uno.UI.Toolkit"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid toolkit:VisibleBoundsPadding.PaddingMask="All">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Custom title bar (Windows) -->
        <Grid
            x:Name="TitleBarGrid"
            Height="48"
            Background="#11000000"
            ColumnSpacing="16"
            Visibility="{x:Bind HasCustomTitleBar}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
        </Grid>

        <!-- App icon in title bar -->
        <Grid
            Width="44"
            Height="48"
            Padding="0,8,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Center"
            Visibility="{x:Bind HasCustomTitleBar}">
            <Image
                Width="20"
                Height="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Source="ms-appx:///Assets/Icons/icon_foreground.png" />
        </Grid>

        <!-- NavigationView -->
        <NavigationView
            x:Name="NavView"
            Grid.Row="1"
            BackRequested="NavView_BackRequested"
            CompactModeThresholdWidth="640"
            CompactPaneLength="48"
            ExpandedModeThresholdWidth="1008"
            IsBackButtonVisible="Auto"
            IsBackEnabled="{x:Bind ViewModel.CanGoBack, Mode=OneWay}"
            IsPaneToggleButtonVisible="True"
            Loaded="NavView_Loaded"
            OpenPaneLength="280"
            PaneDisplayMode="Auto"
            SelectionChanged="NavView_SelectionChanged">

            <NavigationView.MenuItems>
                <NavigationViewItem
                    x:Name="MainNavItem"
                    Content="Home"
                    Tag="Main">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <Frame x:Name="InnerFrame" />
        </NavigationView>
    </Grid>
</Page>
